!function(t){"use strict";CherryJsCore.utilites.namespace("tm_style_switcher_scripts"),CherryJsCore.tm_style_switcher_scripts={confirmDialog:null,init:function(){t(document).on("ready",this.constructor.bind(this))},constructor:function(){this.confirmDialog=t("#style-switch-confirm"),t("#customize-theme-controls").on("click",".tmss-export-button",this.exportSettings.bind(this)),t("#customize-theme-controls").on("click",".tmss-import-button",this.ajaxImportSettings.bind(this)),t("#customize-theme-controls").on("click",".tmss-restore-settings-button",this.ajaxRestoreDefaults.bind(this)),t(".tmss-presets").on("click",".tmss-presets__item",this.ajaxPresetSwitch.bind(this)),this.initTooltip(),this.confirmDialog.dialog({autoOpen:!1,resizable:!0,modal:!0,minWidth:400,classes:{"ui-dialog":"ui-corner-all"},create:function(e){t(e.target).parent().css("position","fixed")}})},exportSettings:function(t){var e=this,s=t.target;e.noticeCreate(s,"info",tmssMessages.downloadStarted),window.location.href=tmssConfig.customizerURL+"?tmss-export="+tmssConfig.exportNonce},ajaxImportSettings:function(e){var s=this,o=t(e.target),i=t(".tmss-import-file"),n=i[0].files[0],a=(i.val(),cherry_ajax),r=new FormData,c=t(".tmss-import-images input:checked");r.append("action","tmss_import_settings"),r.append("nonce",a),r.append("tmss-import-file",n),r.append("tmss-import-images",!!c[0]),t.ajax({type:"POST",url:ajaxurl,dataType:"json",data:r,contentType:!1,processData:!1,cache:!1,beforeSend:function(t){n?s.noticeCreate(o,"info",tmssMessages.willBeRestored):(t.abort(),s.noticeCreate(o,"error",tmssMessages.emptyImportFile))},success:function(t){s.noticeCreate(o,t.type,t.message),setTimeout(function(){window.location.reload()},2e3)}})},ajaxRestoreDefaults:function(e){var s=this,o=t(e.target),i=cherry_ajax,n=new FormData;n.append("action","tmss_restore_defaults"),n.append("nonce",i),t.ajax({type:"POST",url:ajaxurl,dataType:"json",data:n,contentType:!1,processData:!1,cache:!1,success:function(t){s.noticeCreate(o,"info",tmssMessages.willBeRestored),setTimeout(function(){window.location.reload()},2e3)}})},ajaxPresetSwitch:function(e){var s=this,o=t(e.currentTarget),i=cherry_ajax,n=o.data("preset"),a=new FormData;a.append("action","tmss_preset_applying"),a.append("nonce",i),a.append("preset",n),s.confirmDialog.dialog("option","buttons",[{text:"yes",classes:"ui-sdsd",click:function(){t(this).dialog("close"),t.ajax({type:"POST",url:ajaxurl,dataType:"json",data:a,contentType:!1,processData:!1,cache:!1,beforeSend:function(t){s.noticeCreate(o,"info",tmssMessages.willBeRestored)},success:function(t){s.noticeCreate(o,t.type,t.message),setTimeout(function(){window.location.reload()},2e3)}})}},{text:"no",click:function(){t(this).dialog("close")}}]),s.confirmDialog.dialog("open")},initTooltip:function(e){t(".tmss-presets").tooltip({items:'.tmss-presets__image:not([data-preset="default_preset"])',tooltipClass:"custom-tooltip-styling",show:{duration:200,delay:50},hide:{duration:100},content:function(){var e=t(this),s=e.attr("src"),o=e.attr("alt");return"<img src="+s+" alt="+o+">"}})},noticeCreate:function(e,s,o){var i,n,a,r=t(e).closest(".tmss-customize-control").find(".tmss-customize-notice-container");i=t('<div class="notice-box '+s+'-notice" data-type="'+s+'"><span class="dashicons"></span><div class="inner-text"><span>'+o+"</span></div></div>"),a=i.data("type"),t('.notice-box[data-type="'+a+'"]',r).slideUp(300,function(){t(this).remove()}),r.prepend(i),i.slideDown(300,function(){t(this).addClass("show-state"),n=setTimeout(function(){i.slideUp(300,function(){i.remove(),clearTimeout(n)})},4e3)})},isLocalStorageAvailable:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}},CherryJsCore.tm_style_switcher_scripts.init()}(jQuery);